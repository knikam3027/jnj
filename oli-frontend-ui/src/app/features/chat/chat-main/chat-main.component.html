<div class="flex flex-col h-screen bg-gray-50">
  <!-- Header spanning full width -->
  <app-chat-header 
    [userName]="currentUser?.name || 'User'"
    (toggleSidebar)="toggleSidebar()">
  </app-chat-header>

  <!-- Main content area: Sidebar + Chat -->
  <div class="flex flex-1 overflow-hidden relative">
    <!-- Sidebar - Hidden on mobile by default, shown on desktop -->
    <div 
      [class.hidden]="!isSidebarOpen"
      class="absolute md:relative inset-y-0 left-0 z-30 md:block">
      <app-chat-sidebar (newChat)="onNewChat()"></app-chat-sidebar>
    </div>

    <!-- Backdrop for mobile -->
    <div 
      *ngIf="isSidebarOpen" 
      (click)="toggleSidebar()"
      class="fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden">
    </div>

    <!-- Chat Area -->
    <div class="flex-1 flex flex-col w-full overflow-hidden">
      <!-- Messages -->
      <app-chat-messages 
        [messages]="messages()"
        [isLoading]="isLoading()"
        (editMessage)="onEditMessage($event)">
      </app-chat-messages>

      <!-- Input -->
      <app-chat-input (sendMessage)="onSendMessage($event)"></app-chat-input>
    </div>
  </div>
</div>
